<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>TailorCart | Sign In</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../styles/style.css" />

    <style>
      .auth-left {
        background-image: url("../assets/images/auth/Sign-in.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }

      /* ---------- TailorCart Role Toggle (subtle) ---------- */
      .tc-role-wrap {
        border: 1px solid rgba(15, 23, 42, 0.12);
        background: #ffffff;
        border-radius: 16px;
        padding: 12px;
      }
      .tc-role-top {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
      }
      .tc-role-label {
        font-size: 12px;
        color: rgba(15, 23, 42, 0.6);
        display: flex;
        align-items: center;
        gap: 6px;
        user-select: none;
      }
      .tc-role-pill {
        font-size: 12px;
        font-weight: 600;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid rgba(15, 23, 42, 0.12);
        background: #fff;
      }
      .tc-toggle {
        position: relative;
        height: 42px;
        border-radius: 14px;
        border: 1px solid rgba(15, 23, 42, 0.1);
        background: rgba(15, 23, 42, 0.03);
        overflow: hidden;
      }
      .tc-toggle-btns {
        position: absolute;
        inset: 0;
        display: grid;
        grid-template-columns: 1fr 1fr;
        z-index: 1;
      }
      .tc-toggle-btn {
        border: none;
        background: transparent;
        font-size: 12px;
        font-weight: 600;
        color: rgba(15, 23, 42, 0.5);
        cursor: pointer;
        user-select: none;
      }
      .tc-toggle.is-customer .tc-toggle-btn[data-role="customer"],
      .tc-toggle.is-tailor .tc-toggle-btn[data-role="tailor"] {
        color: rgba(15, 23, 42, 0.85);
      }
      .tc-thumb {
        position: absolute;
        top: 4px;
        left: 4px;
        width: calc(50% - 6px);
        height: 34px;
        background: #ffffff; /* solid background prevents text bleed */
        border-radius: 12px;
        border: 1px solid rgba(15, 23, 42, 0.12);
        box-shadow: 0 6px 16px rgba(15, 23, 42, 0.08);
        z-index: 3;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        font-size: 12px;
        font-weight: 700;
        color: #0f172a;
        transform: translate3d(0, 0, 0);
        transition: transform 220ms ease;
        will-change: transform;
        pointer-events: none;
      }
      .tc-toggle.is-tailor .tc-thumb {
        transform: translate3d(100%, 0, 0);
      }
      .tc-thumb-ico {
        width: 20px;
        height: 20px;
        border-radius: 8px;
        background: rgba(217, 119, 6, 0.12);
        display: grid;
        place-items: center;
        font-size: 12px;
      }
      .tc-role-hint {
        font-size: 12px;
        margin-top: 8px;
        color: rgba(15, 23, 42, 0.6);
      }
      .tc-role-hint b {
        color: rgba(15, 23, 42, 0.85);
      }
    </style>
  </head>
  <body>
    <div class="auth-layout">
      <!-- LEFT ORANGE PANEL -->
      <div class="auth-left">
        <div class="auth-left-inner">
          <div class="d-flex align-items-center gap-2 mb-4">
            <div class="auth-logo-icon">üëï</div>
            <span class="fw-bold brand-logo mb-0">TailorCart</span>
          </div>

          <h2 class="auth-title mb-2">Your Style, Perfectly Tailored</h2>
          <p class="auth-text mb-4">
            Connect with expert tailors and discover personalized fashion
            solutions crafted just for you.
          </p>

          <a
            href="signup-tailor.html"
            class="btn btn-light btn-sm rounded-pill px-3"
          >
            Are you a tailor? Join us
          </a>

          <div class="auth-features mt-auto pt-5">
            <div class="d-flex gap-4 gap-md-5">
              <div class="auth-feature-item">
                <div class="auth-feature-icon">‚ú®</div>
                <span>Expert Tailors</span>
              </div>
              <div class="auth-feature-item">
                <div class="auth-feature-icon">üéØ</div>
                <span>Perfect Fit</span>
              </div>
              <div class="auth-feature-item">
                <div class="auth-feature-icon">‚ö°</div>
                <span>Fast Service</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT WHITE PANEL -->
      <div class="auth-right">
        <div class="auth-right-inner">
          <div class="d-lg-none mb-3"></div>

          <h3 class="mb-1">Welcome Back</h3>
          <p class="text-muted small mb-4">
            Sign in to continue to TailorCart.
          </p>

          <!-- Social login (static for now) -->
          <button
            class="btn btn-outline-secondary w-100 mb-3 d-flex align-items-center justify-content-center gap-2"
          >
            <span>üåê</span>
            <span>Continue with Google</span>
          </button>

          <div class="d-flex align-items-center my-3">
            <div class="flex-grow-1 border-bottom"></div>
            <span class="mx-2 small text-muted">or sign in with email</span>
            <div class="flex-grow-1 border-bottom"></div>
          </div>

          <form id="loginForm">
            <!-- Role selector (Customer / Tailor) -->
            <input type="hidden" id="activeRole" value="customer" />

            <div class="tc-role-wrap mb-3">
              <div class="tc-role-top">
                <div class="tc-role-label">üß∑ Mode</div>
                <div class="tc-role-pill" id="tcRolePill">Customer</div>
              </div>

              <div class="tc-toggle is-customer" id="tcRoleToggle">
                <div class="tc-toggle-btns">
                  <button
                    type="button"
                    class="tc-toggle-btn"
                    data-role="customer"
                  >
                    Customer
                  </button>
                  <button
                    type="button"
                    class="tc-toggle-btn"
                    data-role="tailor"
                  >
                    Tailor
                  </button>
                </div>

                <div class="tc-thumb">
                  <span class="tc-thumb-ico" id="tcThumbIcon">üßç</span>
                  <span id="tcThumbText">Customer</span>
                </div>
              </div>

              <div class="tc-role-hint" id="tcRoleHint">
                You‚Äôre signing in as <b>Customer</b>.
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label small">Email</label>
              <input
                type="email"
                class="form-control"
                id="loginEmail"
                placeholder="you@example.com"
                required
              />
            </div>

            <div class="mb-2">
              <label class="form-label small">Password</label>
              <input
                type="password"
                class="form-control"
                id="loginPassword"
                placeholder="Enter your password"
                required
              />
            </div>

            <div class="d-flex justify-content-between align-items-center mb-3">
              <div class="form-check small">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="rememberMe"
                />
                <label class="form-check-label" for="rememberMe">
                  Remember me
                </label>
              </div>
              <a href="#" class="small">Forgot password?</a>
            </div>

            <div id="loginMessage" class="small mb-2"></div>

            <button type="submit" class="btn btn-primary w-100 mb-3">
              Sign In
            </button>
          </form>

          <p class="small text-muted mb-0 text-center">
            New to TailorCart?
            <a href="signup.html">Create an account</a>
          </p>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      (function () {
        const roleInput = document.getElementById("activeRole");
        const toggle = document.getElementById("tcRoleToggle");
        const pill = document.getElementById("tcRolePill");
        const hint = document.getElementById("tcRoleHint");
        const text = document.getElementById("tcThumbText");
        const icon = document.getElementById("tcThumbIcon");

        function setRole(role) {
          const r = (role || "customer").toLowerCase();
          if (roleInput) roleInput.value = r;

          if (toggle) {
            toggle.classList.toggle("is-customer", r === "customer");
            toggle.classList.toggle("is-tailor", r === "tailor");
          }

          const label = r === "tailor" ? "Tailor" : "Customer";
          if (pill) pill.textContent = label;
          if (text) text.textContent = label;
          if (icon) icon.textContent = r === "tailor" ? "üßµ" : "üßç";
          if (hint) hint.innerHTML = `You‚Äôre signing in as <b>${label}</b>.`;

          // Optional: expose selected role for any existing login JS
          window.TC_ACTIVE_ROLE = r;
        }

        if (toggle) {
          toggle.addEventListener("click", (e) => {
            const btn = e.target.closest(".tc-toggle-btn");
            if (!btn) return;
            setRole(btn.dataset.role);
          });
        }

        setRole(roleInput ? roleInput.value : "customer");
      })();
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Role toggle script stays as-is ABOVE these -->

    <!-- ‚úÖ Auth + Login logic -->
    <script src="../scripts/main.js"></script>
    <script src="../scripts/authStore.js"></script>
    <script src="../scripts/login.js"></script>
  </body>
</html>
